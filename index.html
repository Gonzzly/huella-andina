<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Huella Andina - Artesanía Viva</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel para interpretar JSX en el navegador -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Fuentes -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">

    <style>
        .font-serif { font-family: 'Playfair Display', serif; }
        .font-sans { font-family: 'Lato', sans-serif; }
        
        /* Colores personalizados */
        .bg-terracotta-600 { background-color: #E07A5F; }
        .bg-terracotta-500 { background-color: #E78F78; }
        .text-terracotta-600 { color: #E07A5F; }
        .text-terracotta-500 { color: #E78F78; }
        .border-terracotta-500 { border-color: #E07A5F; }
        
        /* Estados Hover */
        .hover\:bg-terracotta-600:hover { background-color: #E07A5F; }
        .hover\:bg-terracotta-700:hover { background-color: #C66249; }
        .hover\:text-terracotta-600:hover { color: #E07A5F; }
        .hover\:text-terracotta-500:hover { color: #E78F78; }
        .hover\:border-terracotta-500:hover { border-color: #E07A5F; }

        /* Animaciones */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideInRight { from { transform: translateX(100%); } to { transform: translateX(0); } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .animate-fade-in-up { animation: fadeInUp 0.8s ease-out forwards; }
        .animate-slide-in-right { animation: slideInRight 0.3s ease-out forwards; }
    </style>
</head>
<body class="bg-white text-stone-800 font-sans selection:bg-terracotta-200 selection:text-terracotta-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONOS ---
        const Icon = ({ children, className, size = 24, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>{children}</svg>
        );
        const ShoppingBag = (props) => <Icon {...props}><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><path d="M3 6h18"/><path d="M16 10a4 4 0 0 1-8 0"/></Icon>;
        const Heart = (props) => <Icon {...props}><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></Icon>;
        const MenuIcon = (props) => <Icon {...props}><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></Icon>;
        const XIcon = (props) => <Icon {...props}><path d="M18 6 6 18"/><path d="m6 6 12 12"/></Icon>;
        const ArrowRight = (props) => <Icon {...props}><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></Icon>;
        const Star = (props) => <Icon {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></Icon>;
        const Users = (props) => <Icon {...props}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></Icon>;
        const MapPin = (props) => <Icon {...props}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></Icon>;
        const Instagram = (props) => <Icon {...props}><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></Icon>;
        const Facebook = (props) => <Icon {...props}><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></Icon>;
        const Mail = (props) => <Icon {...props}><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></Icon>;
        const Plus = (props) => <Icon {...props}><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></Icon>;
        const Image = (props) => <Icon {...props}><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></Icon>;


// --- DATOS INICIALES ---
const INITIAL_PRODUCTS = [
    {
        id: 1,
        name: "Tejido Artesanal",
        price: 150.00,
        category: "Tejidos",
        image: "tejido.jpg",
        artisan: "Artesana Local",
        location: "Cajamarca",
        description: "Tejido hecho a mano con técnicas tradicionales."
    },
    {
        id: 2,
        name: "Cerámica Decorativa",
        price: 120.00,
        category: "Cerámica",
        image: "ceramica.jpg",
        artisan: "Taller Andino",
        location: "Cajamarca",
        description: "Pieza de cerámica moldeada y pintada a mano."
    },
    {
        id: 3,
        name: "Queso Artesanal",
        price: 45.00,
        category: "Gastronomía",
        image: "queso.jpg",
        artisan: "Productores Locales",
        location: "Baños del Inca",
        description: "Queso fresco elaborado con leche natural."
    },
    {
        id: 4,
        name: "Poncho Andino",
        price: 280.00,
        category: "Textil",
        image: "poncho.jpg",
        artisan: "Jorge Quispe",
        location: "Porcón",
        description: "Poncho de lana tejido en telar tradicional."
    },
    {
        id: 5,
        name: "Sombrero Artesanal",
        price: 350.00,
        category: "Tejidos",
        image: "sombrero.jpg",
        artisan: "María Silva",
        location: "Celendín",
        description: "Sombrero tejido a mano con fibras naturales."
    },
    {
        id: 6,
        name: "Pinturas Decorativas",
        price: 200.00,
        category: "Arte",
        image: "pinturas.jpg",
        artisan: "Artista Local",
        location: "Cajamarca",
        description: "Pinturas hechas a mano con motivos andinos."
    }
];




        const ARTISANS = [
            {
                name: "María Silva",
                role: "Maestra Tejedora",
                story: "Lleva 40 años tejiendo sombreros en Celendín. Su arte ha pagado la educación de sus 3 hijos.",
                image: "https://images.unsplash.com/photo-1567532939604-b6b5b0db2604?auto=format&fit=crop&q=80&w=150&h=150"
            },
            {
                name: "Coop. Porcón",
                role: "Comunidad de Textileros",
                story: "Más de 20 familias que preservan las técnicas ancestrales de teñido natural.",
                image: "https://images.unsplash.com/photo-1589254065878-42c9da997008?auto=format&fit=crop&q=80&w=150&h=150"
            }
        ];

        // --- COMPONENTES ---

        const Button = ({ children, variant = 'primary', className = '', ...props }) => {
            const baseStyles = "px-6 py-3 rounded-lg font-medium transition-all duration-300 transform active:scale-95 flex items-center justify-center gap-2";
            const variants = {
                primary: "bg-terracotta-600 hover:bg-terracotta-700 text-white shadow-lg hover:shadow-xl",
                secondary: "bg-stone-100 hover:bg-stone-200 text-stone-800 border border-stone-200",
                outline: "border-2 border-white text-white hover:bg-white hover:text-terracotta-600"
            };
            
            return (
                <button className={`${baseStyles} ${variants[variant]} ${className}`} {...props}>
                    {children}
                </button>
            );
        };

        const SectionTitle = ({ title, subtitle, centered = true }) => (
            <div className={`mb-12 ${centered ? 'text-center' : 'text-left'}`}>
                <h2 className="text-3xl md:text-4xl font-serif text-stone-800 mb-4">{title}</h2>
                <div className={`h-1 w-24 bg-terracotta-500 mb-4 ${centered ? 'mx-auto' : ''}`}></div>
                {subtitle && <p className="text-stone-600 max-w-2xl mx-auto text-lg">{subtitle}</p>}
            </div>
        );

        const Navbar = ({ cartCount, onCartClick, onNavClick, mobileMenuOpen, setMobileMenuOpen, onAdminClick }) => (
            <nav className="fixed top-0 w-full bg-white/95 backdrop-blur-sm shadow-sm z-50 border-b border-stone-100">
                <div className="container mx-auto px-4 md:px-6 h-20 flex items-center justify-between">
                    <div className="flex items-center gap-2 cursor-pointer" onClick={() => onNavClick('home')}>
                        <div className="w-10 h-10 bg-terracotta-600 rounded-full flex items-center justify-center text-white font-serif font-bold text-xl">H</div>
                        <div>
                            <h1 className="text-xl font-bold text-stone-800 font-serif leading-none">HUELLA ANDINA</h1>
                            <span className="text-xs text-terracotta-600 tracking-widest uppercase">Artesanía Viva</span>
                        </div>
                    </div>
                    <div className="hidden md:flex items-center gap-8 text-stone-600 font-medium">
                        <button onClick={() => onNavClick('home')} className="hover:text-terracotta-600 transition-colors">Inicio</button>
                        <button onClick={() => onNavClick('shop')} className="hover:text-terracotta-600 transition-colors">Tienda</button>
                        <button onClick={() => onNavClick('impact')} className="hover:text-terracotta-600 transition-colors">Nuestro Impacto</button>
                        <button onClick={onAdminClick} className="flex items-center gap-1 text-terracotta-600 hover:text-terracotta-700 font-bold bg-terracotta-50 px-3 py-1 rounded-full text-sm border border-terracotta-200">
                             <Plus size={16} /> Soy Artesano
                        </button>
                    </div>
                    <div className="flex items-center gap-4">
                        <button className="relative p-2 text-stone-600 hover:text-terracotta-600 transition-colors" onClick={onCartClick}>
                            <ShoppingBag size={24} />
                            {cartCount > 0 && (
                                <span className="absolute top-0 right-0 bg-terracotta-600 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center animate-bounce">
                                    {cartCount}
                                </span>
                            )}
                        </button>
                        <button className="md:hidden p-2 text-stone-600" onClick={() => setMobileMenuOpen(!mobileMenuOpen)}>
                            {mobileMenuOpen ? <XIcon size={24} /> : <MenuIcon size={24} />}
                        </button>
                    </div>
                </div>
                {mobileMenuOpen && (
                    <div className="md:hidden absolute top-20 left-0 w-full bg-white border-b border-stone-200 shadow-xl py-4 px-6 flex flex-col gap-4">
                        <button onClick={() => { onNavClick('home'); setMobileMenuOpen(false); }} className="text-left py-2 border-b border-stone-100">Inicio</button>
                        <button onClick={() => { onNavClick('shop'); setMobileMenuOpen(false); }} className="text-left py-2 border-b border-stone-100">Tienda</button>
                        <button onClick={() => { onAdminClick(); setMobileMenuOpen(false); }} className="text-left py-2 border-b border-stone-100 text-terracotta-600 font-bold">Soy Artesano (Agregar)</button>
                    </div>
                )}
            </nav>
        );

        const Hero = ({ onShopNow }) => (
            <header className="relative pt-20 min-h-[90vh] flex items-center bg-stone-900 overflow-hidden">
                <div className="absolute inset-0 z-0">
                    <div className="absolute inset-0 bg-gradient-to-r from-stone-900/90 to-stone-900/40 z-10"></div>
                    <img src="https://images.unsplash.com/photo-1533052720272-d41a7d656911?auto=format&fit=crop&q=80&w=1920&h=1080" alt="Paisaje Cajamarca" className="w-full h-full object-cover opacity-60" />
                </div>
                <div className="container mx-auto px-4 md:px-6 relative z-20 text-white">
                    <div className="max-w-3xl animate-fade-in-up">
                        <span className="inline-block py-1 px-3 rounded-full bg-terracotta-600/20 border border-terracotta-500 text-terracotta-300 text-sm font-bold mb-6 tracking-wider uppercase">De Cajamarca para el Mundo</span>
                        <h1 className="text-5xl md:text-7xl font-serif font-bold leading-tight mb-6">Conectamos personas con <span className="text-terracotta-500">historias</span>, origen y cultura.</h1>
                        <p className="text-xl text-stone-300 mb-8 max-w-xl leading-relaxed">Descubre productos auténticos, hechos a mano por maestros artesanos de los Andes peruanos. Cada pieza lleva consigo el alma de Cajamarca.</p>
                        <div className="flex flex-col sm:flex-row gap-4">
                            <Button onClick={onShopNow}>Explorar Catálogo <ArrowRight size={20} /></Button>
                            <Button variant="outline">Ver Video de Impacto</Button>
                        </div>
                    </div>
                </div>
            </header>
        );

        const ImpactSection = () => (
            <section className="py-20 bg-stone-50">
                <div className="container mx-auto px-4 md:px-6">
                    <div className="grid md:grid-cols-2 gap-16 items-center">
                        <div>
                            <SectionTitle title="El Problema & Nuestra Solución" subtitle="¿Por qué existe Huella Andina?" centered={false} />
                            <div className="space-y-8">
                                <div className="flex gap-4">
                                    <div className="w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 shrink-0"><XIcon size={24} /></div>
                                    <div><h3 className="text-xl font-bold text-stone-800 mb-2">La Desconexión</h3><p className="text-stone-600">Artesanos con talento único no tienen acceso al mercado digital, limitando sus ingresos y el reconocimiento de su arte.</p></div>
                                </div>
                                <div className="flex gap-4">
                                    <div className="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center text-green-600 shrink-0"><Heart size={24} /></div>
                                    <div><h3 className="text-xl font-bold text-stone-800 mb-2">El Puente Digital</h3><p className="text-stone-600">Creamos una plataforma con trazabilidad donde cada producto cuenta su historia, asegurando un precio justo.</p></div>
                                </div>
                            </div>
                        </div>
                        <div className="relative">
                            <div className="absolute -top-10 -right-10 w-40 h-40 bg-terracotta-100 rounded-full blur-3xl opacity-50"></div>
                            <div className="grid grid-cols-2 gap-4">
                                <div className="bg-white p-6 rounded-2xl shadow-lg transform translate-y-8"><Users className="text-terracotta-600 mb-4" size={32} /><h4 className="text-4xl font-bold text-stone-800 mb-1">50+</h4><p className="text-sm text-stone-500 font-medium">Artesanos Registrados</p></div>
                                <div className="bg-white p-6 rounded-2xl shadow-lg"><ShoppingBag className="text-terracotta-600 mb-4" size={32} /><h4 className="text-4xl font-bold text-stone-800 mb-1">500+</h4><p className="text-sm text-stone-500 font-medium">Productos Únicos</p></div>
                                <div className="bg-white p-6 rounded-2xl shadow-lg transform translate-y-8 col-span-2"><Star className="text-terracotta-600 mb-4" size={32} /><h4 className="text-xl font-bold text-stone-800 mb-2">Aliados Estratégicos</h4><p className="text-sm text-stone-500">Respaldados por ProInnóvate y Mincetur.</p></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        );

        const ProductCard = ({ product, onAdd }) => (
            <div className="group bg-white rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 border border-stone-100 overflow-hidden flex flex-col h-full">
                <div className="relative overflow-hidden aspect-square">
                    <img src={product.image} alt={product.name} className="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500" onError={(e) => {e.target.src='https://via.placeholder.com/400?text=Sin+Imagen';}} />
                    <div className="absolute top-3 right-3 bg-white/90 backdrop-blur px-2 py-1 rounded text-xs font-bold text-stone-800 shadow-sm">{product.category}</div>
                </div>
                <div className="p-5 flex-1 flex flex-col">
                    <div className="flex items-start justify-between mb-2">
                        <div>
                            <h3 className="font-bold text-lg text-stone-800 line-clamp-1">{product.name}</h3>
                            <div className="flex items-center gap-1 text-xs text-stone-500 mt-1"><MapPin size={12} /> {product.location}</div>
                        </div>
                    </div>
                    <p className="text-stone-600 text-sm mb-4 line-clamp-2">{product.description}</p>
                    <div className="mt-auto flex items-center justify-between pt-4 border-t border-stone-100">
                        <div className="flex flex-col"><span className="text-xs text-stone-500">Hecho por</span><span className="text-sm font-medium text-terracotta-600 underline cursor-pointer">{product.artisan}</span></div>
                        <div className="flex items-center gap-3">
                            <span className="font-bold text-lg text-stone-900">S/ {product.price}</span>
                            <button onClick={() => onAdd(product)} className="w-10 h-10 rounded-full bg-stone-900 text-white flex items-center justify-center hover:bg-terracotta-600 transition-colors"><ShoppingBag size={18} /></button>
                        </div>
                    </div>
                </div>
            </div>
        );

        const ShopSection = ({ addToCart, products }) => (
            <section className="py-20 bg-white">
                <div className="container mx-auto px-4 md:px-6">
                    <SectionTitle title="Nuestras Colecciones" subtitle="Piezas únicas curadas directamente de los talleres de Cajamarca." />
                    <div className="flex flex-wrap justify-center gap-4 mb-12">
                        {['Todos', 'Textil', 'Cerámica', 'Gastronomía', 'Tallado'].map((cat) => (
                            <button key={cat} className="px-6 py-2 rounded-full border border-stone-200 text-stone-600 hover:border-terracotta-500 hover:text-terracotta-600 transition-colors text-sm font-medium">{cat}</button>
                        ))}
                    </div>
                    {products.length === 0 ? (
                        <div className="text-center py-10 text-stone-500">No hay productos disponibles. ¡Agrega uno como artesano!</div>
                    ) : (
                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                            {products.map(product => (
                                <ProductCard key={product.id} product={product} onAdd={addToCart} />
                            ))}
                        </div>
                    )}
                </div>
            </section>
        );

        const CartModal = ({ isOpen, onClose, cart, removeFromCart }) => {
            if (!isOpen) return null;
            const total = cart.reduce((sum, item) => sum + item.price, 0);
            return (
                <div className="fixed inset-0 z-50 flex justify-end">
                    <div className="absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity" onClick={onClose}></div>
                    <div className="relative w-full max-w-md bg-white h-full shadow-2xl flex flex-col animate-slide-in-right">
                        <div className="p-6 border-b border-stone-100 flex items-center justify-between">
                            <h2 className="text-xl font-bold font-serif text-stone-800">Tu Carrito ({cart.length})</h2>
                            <button onClick={onClose} className="p-2 hover:bg-stone-100 rounded-full transition-colors"><XIcon size={20} /></button>
                        </div>
                        <div className="flex-1 overflow-y-auto p-6 space-y-6">
                            {cart.length === 0 ? (
                                <div className="text-center py-12">
                                    <ShoppingBag size={48} className="mx-auto text-stone-300 mb-4" />
                                    <p className="text-stone-500">Tu carrito está vacío</p>
                                    <button onClick={onClose} className="mt-4 text-terracotta-600 font-medium hover:underline">Ir a la tienda</button>
                                </div>
                            ) : (
                                cart.map((item, index) => (
                                    <div key={`${item.id}-${index}`} className="flex gap-4">
                                        <img src={item.image} alt={item.name} className="w-20 h-20 object-cover rounded-lg bg-stone-100" />
                                        <div className="flex-1">
                                            <h4 className="font-bold text-stone-800">{item.name}</h4>
                                            <p className="text-sm text-stone-500 mb-1">{item.artisan}</p>
                                            <div className="flex items-center justify-between mt-2">
                                                <span className="font-medium text-terracotta-600">S/ {item.price}</span>
                                                <button onClick={() => removeFromCart(index)} className="text-xs text-red-500 hover:text-red-700 underline">Eliminar</button>
                                            </div>
                                        </div>
                                    </div>
                                ))
                            )}
                        </div>
                        {cart.length > 0 && (
                            <div className="p-6 border-t border-stone-100 bg-stone-50">
                                <div className="flex justify-between items-center mb-4 text-lg font-bold text-stone-800"><span>Total</span><span>S/ {total.toFixed(2)}</span></div>
                                <Button className="w-full">Proceder al Pago</Button>
                                <p className="text-center text-xs text-stone-400 mt-4 flex items-center justify-center gap-1"><Heart size={12} className="text-terracotta-500" /> El 85% va directo al artesano</p>
                            </div>
                        )}
                    </div>
                </div>
            );
        };
        
        // --- NUEVO: MODAL PARA AGREGAR PRODUCTOS (SIMULADO) ---
        const AddProductModal = ({ isOpen, onClose, onAddProduct }) => {
            if (!isOpen) return null;
            const [formData, setFormData] = useState({
                name: '', price: '', category: 'Textil', artisan: '', location: 'Cajamarca', description: '', image: ''
            });

            const handleSubmit = (e) => {
                e.preventDefault();
                onAddProduct({
                    ...formData,
                    id: Date.now(), // ID único basado en tiempo
                    price: parseFloat(formData.price) || 0
                });
                onClose();
                // Reset form
                setFormData({ name: '', price: '', category: 'Textil', artisan: '', location: 'Cajamarca', description: '', image: '' });
            };

            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
                     <div className="absolute inset-0 bg-stone-900/70 backdrop-blur-sm transition-opacity" onClick={onClose}></div>
                     <div className="relative bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden animate-fade-in-up">
                        <div className="bg-terracotta-600 p-6 flex justify-between items-center">
                            <h2 className="text-white text-xl font-bold font-serif">Agregar Nuevo Producto</h2>
                            <button onClick={onClose} className="text-white/80 hover:text-white"><XIcon size={24} /></button>
                        </div>
                        <form onSubmit={handleSubmit} className="p-6 space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-stone-700 mb-1">Nombre del Producto</label>
                                <input required type="text" className="w-full p-2 border border-stone-300 rounded focus:ring-2 focus:ring-terracotta-500 focus:outline-none" 
                                    value={formData.name} onChange={e => setFormData({...formData, name: e.target.value})} placeholder="Ej: Manta Tradicional" />
                            </div>
                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <label className="block text-sm font-medium text-stone-700 mb-1">Precio (S/)</label>
                                    <input required type="number" className="w-full p-2 border border-stone-300 rounded focus:ring-2 focus:ring-terracotta-500 focus:outline-none" 
                                        value={formData.price} onChange={e => setFormData({...formData, price: e.target.value})} placeholder="0.00" />
                                </div>
                                <div>
                                    <label className="block text-sm font-medium text-stone-700 mb-1">Categoría</label>
                                    <select className="w-full p-2 border border-stone-300 rounded focus:ring-2 focus:ring-terracotta-500 focus:outline-none"
                                        value={formData.category} onChange={e => setFormData({...formData, category: e.target.value})}>
                                        <option>Textil</option><option>Cerámica</option><option>Gastronomía</option><option>Tallado</option><option>Joyería</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-stone-700 mb-1">Artesano</label>
                                <input required type="text" className="w-full p-2 border border-stone-300 rounded focus:ring-2 focus:ring-terracotta-500 focus:outline-none" 
                                    value={formData.artisan} onChange={e => setFormData({...formData, artisan: e.target.value})} placeholder="Tu nombre" />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-stone-700 mb-1">https://tienda.figurasperuanas.com/wp/wp-content/uploads/2023/01/ceramica-de-cajamarca.jpg</label>
                                <div className="flex gap-2">
                                    <input required type="url" className="w-full p-2 border border-stone-300 rounded focus:ring-2 focus:ring-terracotta-500 focus:outline-none" 
                                        value={formData.image} onChange={e => setFormData({...formData, image: e.target.value})} placeholder="https://..." />
                                    <div className="group relative">
                                        <div className="w-10 h-10 bg-stone-100 border border-stone-300 rounded flex items-center justify-center text-stone-400 cursor-help">
                                            <Image size={20} />
                                        </div>
                                        <div className="absolute bottom-full right-0 mb-2 w-48 bg-stone-800 text-white text-xs p-2 rounded shadow-lg hidden group-hover:block z-10">
                                            https://tienda.figurasperuanas.com/wp/wp-content/uploads/2023/01/ceramica-de-cajamarca.jpg
                                        </div>
                                    </div>
                                </div>
                            </div>
                             <div>
                                <label className="block text-sm font-medium text-stone-700 mb-1">Descripción</label>
                                <textarea required className="w-full p-2 border border-stone-300 rounded focus:ring-2 focus:ring-terracotta-500 focus:outline-none" rows="2"
                                    value={formData.description} onChange={e => setFormData({...formData, description: e.target.value})} placeholder="Historia del producto..."></textarea>
                            </div>
                            <Button type="submit" className="w-full mt-4">Publicar Producto</Button>
                        </form>
                     </div>
                </div>
            )
        }

        const Footer = () => (
            <footer className="bg-stone-900 text-stone-300 py-16">
                <div className="container mx-auto px-4 md:px-6">
                    <div className="grid md:grid-cols-4 gap-12 mb-12">
                        <div className="col-span-1 md:col-span-2">
                            <div className="flex items-center gap-2 mb-6">
                                <div className="w-8 h-8 bg-terracotta-600 rounded-full flex items-center justify-center text-white font-serif font-bold">H</div>
                                <h2 className="text-2xl font-bold text-white font-serif">HUELLA ANDINA</h2>
                            </div>
                            <p className="max-w-md text-stone-400 mb-6">Somos el puente digital que conecta la maestría de los artesanos cajamarquinos con compradores que valoran el origen, la cultura y el comercio justo.</p>
                            <div className="flex gap-4">
                                <div className="w-10 h-10 rounded-full bg-stone-800 flex items-center justify-center hover:bg-terracotta-600 transition-colors cursor-pointer"><Instagram size={20} /></div>
                                <div className="w-10 h-10 rounded-full bg-stone-800 flex items-center justify-center hover:bg-terracotta-600 transition-colors cursor-pointer"><Facebook size={20} /></div>
                                <div className="w-10 h-10 rounded-full bg-stone-800 flex items-center justify-center hover:bg-terracotta-600 transition-colors cursor-pointer"><Mail size={20} /></div>
                            </div>
                        </div>
                        <div>
                            <h3 className="text-white font-bold mb-4">Plataforma</h3>
                            <ul className="space-y-3">
                                <li><a href="#" className="hover:text-terracotta-500 transition-colors">Tienda</a></li>
                                <li><a href="#" className="hover:text-terracotta-500 transition-colors">Nuestros Artesanos</a></li>
                                <li><a href="#" className="hover:text-terracotta-500 transition-colors">Regalos Corporativos</a></li>
                            </ul>
                        </div>
                        <div>
                            <h3 className="text-white font-bold mb-4">Contacto</h3>
                            <ul className="space-y-3">
                                <li>info@huellaandina.pe</li>
                                <li>+51 999 888 777</li>
                                <li>Cajamarca, Perú</li>
                            </ul>
                        </div>
                    </div>
                    <div className="border-t border-stone-800 pt-8 flex flex-col md:flex-row justify-between items-center text-sm text-stone-500">
                        <p>© 2024 Huella Andina. Todos los derechos reservados.</p>
                    </div>
                </div>
            </footer>
        );

        const App = () => {
            const [currentView, setCurrentView] = useState('home');
            const [products, setProducts] = useState(INITIAL_PRODUCTS); // Estado para productos dinámicos
            const [cart, setCart] = useState([]);
            const [isCartOpen, setIsCartOpen] = useState(false);
            const [isAddProductOpen, setIsAddProductOpen] = useState(false);
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

            useEffect(() => { window.scrollTo({ top: 0, behavior: 'smooth' }); }, [currentView]);

            const addToCart = (product) => { setCart([...cart, product]); setIsCartOpen(true); };
            const removeFromCart = (indexToRemove) => { setCart(cart.filter((_, index) => index !== indexToRemove)); };
            
            // Función para agregar producto
            const handleAddProduct = (newProduct) => {
                setProducts([newProduct, ...products]); // Agrega al inicio de la lista
                setCurrentView('shop'); // Redirige a la tienda para ver el nuevo producto
            };

            return (
                <div className="min-h-screen">
                    <Navbar 
                        cartCount={cart.length} 
                        onCartClick={() => setIsCartOpen(true)} 
                        onNavClick={setCurrentView} 
                        onAdminClick={() => setIsAddProductOpen(true)}
                        mobileMenuOpen={mobileMenuOpen} 
                        setMobileMenuOpen={setMobileMenuOpen} 
                    />
                    
                    <main>
                        {currentView === 'home' && (
                            <>
                                <Hero onShopNow={() => setCurrentView('shop')} />
                                <ImpactSection />
                                <ShopSection addToCart={addToCart} products={products} />
                                <section className="py-20 bg-stone-900 text-white relative overflow-hidden">
                                    <img src="https://images.unsplash.com/photo-1596401490264-b892d3b2f883?auto=format&fit=crop&q=80&w=1920&h=600" className="absolute inset-0 w-full h-full object-cover opacity-20" alt="Artesanos trabajando" />
                                    <div className="container mx-auto px-4 relative z-10 text-center">
                                        <h2 className="text-3xl md:text-5xl font-serif font-bold mb-6">Detrás de cada pieza, hay una vida</h2>
                                        <p className="text-xl text-stone-300 max-w-2xl mx-auto mb-8">Conoce las historias de María, Jorge y la Cooperativa Porcón.</p>
                                        <Button variant="outline" onClick={() => setCurrentView('artisans')}>Conocer a los Artesanos</Button>
                                    </div>
                                </section>
                            </>
                        )}
                        {currentView === 'shop' && (
                            <div className="pt-20">
                                <div className="bg-stone-100 py-12 mb-8">
                                    <div className="container mx-auto px-4">
                                        <div className="flex justify-between items-end">
                                            <div>
                                                <h1 className="text-4xl font-serif font-bold text-stone-800">Tienda</h1>
                                                <p className="text-stone-600">Catálogo completo de tesoros cajamarquinos</p>
                                            </div>
                                            <button onClick={() => setIsAddProductOpen(true)} className="hidden md:flex items-center gap-2 text-terracotta-600 font-bold hover:underline">
                                                <Plus size={18} /> Agregar Producto
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <ShopSection addToCart={addToCart} products={products} />
                            </div>
                        )}
                        {currentView === 'impact' && <div className="pt-20"><Hero onShopNow={() => setCurrentView('shop')} /><ImpactSection /></div>}
                        {currentView === 'artisans' && (
                            <div className="pt-20 min-h-screen bg-stone-50">
                                <div className="bg-white py-12 border-b border-stone-200">
                                    <div className="container mx-auto px-4 text-center"><h1 className="text-4xl font-serif font-bold text-stone-800 mb-4">Nuestros Maestros</h1><p className="max-w-2xl mx-auto text-stone-600">Personas reales que mantienen vivas las tradiciones ancestrales de Cajamarca.</p></div>
                                </div>
                                <div className="container mx-auto px-4 py-12 grid md:grid-cols-2 gap-8">
                                    {ARTISANS.map((artisan, idx) => (
                                        <div key={idx} className="bg-white p-8 rounded-xl shadow-sm flex gap-6 items-center">
                                            <img src={artisan.image} className="w-24 h-24 rounded-full object-cover" alt={artisan.name} />
                                            <div>
                                                <h3 className="text-xl font-bold font-serif">{artisan.name}</h3>
                                                <p className="text-terracotta-600 text-sm font-bold uppercase tracking-wide mb-2">{artisan.role}</p>
                                                <p className="text-stone-600 text-sm">{artisan.story}</p>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}
                    </main>
                    <Footer />
                    <CartModal isOpen={isCartOpen} onClose={() => setIsCartOpen(false)} cart={cart} removeFromCart={removeFromCart} />
                    <AddProductModal isOpen={isAddProductOpen} onClose={() => setIsAddProductOpen(false)} onAddProduct={handleAddProduct} />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
